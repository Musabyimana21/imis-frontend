import{g as m}from"./CXRviRvy.js";import{t as c}from"./ClPuwlXU.js";import{P as d}from"./BJnwFEqq.js";const g=d;async function t(e,o={}){const r=m(c),n={"Content-Type":"application/json",...o.headers};r&&(n.Authorization=`Bearer ${r}`);try{const s=await fetch(`${g}${e}`,{...o,headers:n});if(!s.ok){let a="Something went wrong";try{const i=await s.json();a=i.detail||i.message||a}catch{s.status===401?a="Invalid credentials. Please check your email and password.":s.status===400?a="Invalid request. Please check your input.":s.status===404?a="Resource not found.":s.status===500?a="Server error. Please try again later.":a=`Error: ${s.statusText}`}throw new Error(a)}return s.json()}catch(s){throw s.message.includes("fetch")?new Error("Cannot connect to server. Please make sure the backend is running on http://localhost:8001"):s}}const l={auth:{register:e=>t("/api/auth/register",{method:"POST",body:JSON.stringify(e)}),login:e=>t("/api/auth/login",{method:"POST",body:JSON.stringify(e)})},items:{create:e=>t("/api/items/",{method:"POST",body:JSON.stringify(e)}),getAll:()=>t("/api/items/"),getOne:e=>t(`/api/items/${e}`),getMatches:e=>t(`/api/items/${e}/matches`),delete:e=>t(`/api/items/${e}`,{method:"DELETE"})},messages:{send:e=>t("/api/messages/",{method:"POST",body:JSON.stringify(e)}),getAll:()=>t("/api/messages/"),markRead:e=>t(`/api/messages/${e}/read`,{method:"PUT"})},admin:{getStats:()=>t("/api/admin/stats"),getCommissions:()=>t("/api/admin/commissions"),createCommission:(e,o)=>t(`/api/admin/commissions/${e}`,{method:"POST",body:JSON.stringify({amount:o})}),getUsers:()=>t("/api/admin/users")},anonymous:{report:e=>t("/api/anonymous/report",{method:"POST",body:JSON.stringify(e)}),getItems:()=>t("/api/anonymous/items"),track:e=>t(`/api/anonymous/track/${e}`)}};export{l as a};
