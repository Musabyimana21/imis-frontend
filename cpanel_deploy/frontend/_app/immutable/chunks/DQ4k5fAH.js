import{s as rt,E as at,d as u,a as st,r as nt,f as H,b as Ze,a2 as it,i as T,c as r,l as G,_ as ct,e as o,h as ut,D as dt,Y as ft,o as _,j as i,k as y,m as L,q as v,p as c,u as pt,n as lt,w as Fe,x as Ue,y as ht,Z as Qe}from"./CXRviRvy.js";import{S as mt,i as _t,f as vt,d as bt,t as gt,a as yt,m as Ct,e as xt,b as wt}from"./EwStbUFK.js";import{e as $e}from"./D6YF6ztN.js";import{g as It}from"./4rErrFS-.js";import{c as Et}from"./n-3IVrTT.js";import{L as Lt}from"./ZqJSaiCw.js";import{e as kt}from"./f4Im-s9B.js";function et(s,l,t){const e=s.slice();return e[17]=l[t],e}function tt(s){let l,t=s[17].label+"",e;return{c(){l=c("option"),e=Ue(t),this.h()},l(d){l=i(d,"OPTION",{});var f=y(l);e=Fe(f,t),f.forEach(u),this.h()},h(){l.__value=s[17].value,H(l,l.__value)},m(d,f){T(d,l,f),r(l,e)},p:lt,d(d){d&&u(l)}}}function Dt(s){let l,t,e,d="Choose Image",f,g,I="Max 5MB",n,b;return{c(){l=c("input"),t=v(),e=c("label"),e.textContent=d,f=v(),g=c("p"),g.textContent=I,this.h()},l(p){l=i(p,"INPUT",{type:!0,id:!0,accept:!0,class:!0}),t=_(p),e=i(p,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),L(e)!=="svelte-1co5a60"&&(e.textContent=d),f=_(p),g=i(p,"P",{class:!0,"data-svelte-h":!0}),L(g)!=="svelte-x64epl"&&(g.textContent=I),this.h()},h(){o(l,"type","file"),o(l,"id","image-upload-found"),o(l,"accept","image/*"),o(l,"class","hidden svelte-672s98"),o(e,"for","image-upload-found"),o(e,"class","btn btn-secondary cursor-pointer svelte-672s98"),o(g,"class","text-xs text-gray-500 mt-2")},m(p,P){T(p,l,P),T(p,t,P),T(p,e,P),T(p,f,P),T(p,g,P),n||(b=G(l,"change",s[4]),n=!0)},p:lt,d(p){p&&(u(l),u(t),u(e),u(f),u(g)),n=!1,b()}}}function Tt(s){let l,t,e,d,f,g="Remove",I,n;return{c(){l=c("div"),t=c("img"),d=v(),f=c("button"),f.textContent=g,this.h()},l(b){l=i(b,"DIV",{class:!0});var p=y(l);t=i(p,"IMG",{src:!0,alt:!0,class:!0}),d=_(p),f=i(p,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),L(f)!=="svelte-1qo4i66"&&(f.textContent=g),p.forEach(u),this.h()},h(){Qe(t.src,e=s[2])||o(t,"src",e),o(t,"alt","Preview"),o(t,"class","w-full max-w-xs h-32 object-cover rounded mx-auto mb-2 svelte-672s98"),o(f,"type","button"),o(f,"class","btn btn-secondary text-sm"),o(l,"class","relative svelte-672s98")},m(b,p){T(b,l,p),r(l,t),r(l,d),r(l,f),I||(n=G(f,"click",s[5]),I=!0)},p(b,p){p&4&&!Qe(t.src,e=b[2])&&o(t,"src",e)},d(b){b&&u(l),I=!1,n()}}}function Pt(s){let l;return{c(){l=Ue("Report Found Item")},l(t){l=Fe(t,"Report Found Item")},m(t,e){T(t,l,e)},d(t){t&&u(l)}}}function Rt(s){let l,t;return{c(){l=c("div"),t=Ue(`
            Reporting...`),this.h()},l(e){l=i(e,"DIV",{class:!0}),y(l).forEach(u),t=Fe(e,`
            Reporting...`),this.h()},h(){o(l,"class","w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin svelte-672s98")},m(e,d){T(e,l,d),T(e,t,d)},d(e){e&&(u(l),u(t))}}}function Bt(s){let l,t,e,d,f='<h1 class="text-gradient mb-4">Report Found Item</h1> <p>Help reunite someone with their lost item. Your contact will be visible to owners.</p>',g,I,n,b,p="Your Information",P,A,F,M,ce="Full Name *",re,k,ae,h,E,U="Phone Number *",se,q,ge,K,qe="Item Details",ye,Y,X,Ne="Item Title *",Ce,R,xe,z,Z,Oe="Category *",we,D,Ie,J,Q,Se="Description *",Ee,B,Le,W,$,Me="Upload Image (Optional)",ke,ee,De,te,je="Location",Te,N,Pe,Re,O,Be,le,He="Free to report â€¢ Owner will contact you directly",ne,Ve,Ye,oe=$e(s[3]),C=[];for(let a=0;a<oe.length;a+=1)C[a]=tt(et(s,oe,a));function ze(a,w){return a[2]?Tt:Dt}let ue=ze(s),V=ue(s);function ot(a){s[13](a)}let Je={};s[0].location!==void 0&&(Je.selectedLocation=s[0].location),N=new Lt({props:Je}),at.push(()=>vt(N,"selectedLocation",ot)),N.$on("change",s[6]);function We(a,w){return a[1]?Rt:Pt}let de=We(s),j=de(s);return{c(){l=v(),t=c("div"),e=c("div"),d=c("div"),d.innerHTML=f,g=v(),I=c("div"),n=c("form"),b=c("h3"),b.textContent=p,P=v(),A=c("div"),F=c("div"),M=c("label"),M.textContent=ce,re=v(),k=c("input"),ae=v(),h=c("div"),E=c("label"),E.textContent=U,se=v(),q=c("input"),ge=v(),K=c("h3"),K.textContent=qe,ye=v(),Y=c("div"),X=c("label"),X.textContent=Ne,Ce=v(),R=c("input"),xe=v(),z=c("div"),Z=c("label"),Z.textContent=Oe,we=v(),D=c("select");for(let a=0;a<C.length;a+=1)C[a].c();Ie=v(),J=c("div"),Q=c("label"),Q.textContent=Se,Ee=v(),B=c("textarea"),Le=v(),W=c("div"),$=c("label"),$.textContent=Me,ke=v(),ee=c("div"),V.c(),De=v(),te=c("h3"),te.textContent=je,Te=v(),wt(N.$$.fragment),Re=v(),O=c("button"),j.c(),Be=v(),le=c("p"),le.textContent=He,this.h()},l(a){ft("svelte-1o3dk47",document.head).forEach(u),l=_(a),t=i(a,"DIV",{class:!0});var S=y(t);e=i(S,"DIV",{class:!0,style:!0});var x=y(e);d=i(x,"DIV",{class:!0,"data-svelte-h":!0}),L(d)!=="svelte-6b47q7"&&(d.innerHTML=f),g=_(x),I=i(x,"DIV",{class:!0});var ie=y(I);n=i(ie,"FORM",{class:!0});var m=y(n);b=i(m,"H3",{class:!0,"data-svelte-h":!0}),L(b)!=="svelte-1jhsslv"&&(b.textContent=p),P=_(m),A=i(m,"DIV",{class:!0});var fe=y(A);F=i(fe,"DIV",{class:!0});var pe=y(F);M=i(pe,"LABEL",{class:!0,"data-svelte-h":!0}),L(M)!=="svelte-1hwnhxe"&&(M.textContent=ce),re=_(pe),k=i(pe,"INPUT",{type:!0,placeholder:!0,class:!0}),pe.forEach(u),ae=_(fe),h=i(fe,"DIV",{class:!0});var he=y(h);E=i(he,"LABEL",{class:!0,"data-svelte-h":!0}),L(E)!=="svelte-dksr7b"&&(E.textContent=U),se=_(he),q=i(he,"INPUT",{type:!0,placeholder:!0,class:!0}),he.forEach(u),fe.forEach(u),ge=_(m),K=i(m,"H3",{class:!0,"data-svelte-h":!0}),L(K)!=="svelte-1ww5dpf"&&(K.textContent=qe),ye=_(m),Y=i(m,"DIV",{class:!0});var me=y(Y);X=i(me,"LABEL",{class:!0,"data-svelte-h":!0}),L(X)!=="svelte-nwa2gj"&&(X.textContent=Ne),Ce=_(me),R=i(me,"INPUT",{type:!0,placeholder:!0,class:!0}),me.forEach(u),xe=_(m),z=i(m,"DIV",{class:!0});var _e=y(z);Z=i(_e,"LABEL",{class:!0,"data-svelte-h":!0}),L(Z)!=="svelte-14aj41u"&&(Z.textContent=Oe),we=_(_e),D=i(_e,"SELECT",{class:!0});var Ge=y(D);for(let Ae=0;Ae<C.length;Ae+=1)C[Ae].l(Ge);Ge.forEach(u),_e.forEach(u),Ie=_(m),J=i(m,"DIV",{class:!0});var ve=y(J);Q=i(ve,"LABEL",{class:!0,"data-svelte-h":!0}),L(Q)!=="svelte-z9hxos"&&(Q.textContent=Se),Ee=_(ve),B=i(ve,"TEXTAREA",{placeholder:!0,class:!0,rows:!0}),y(B).forEach(u),ve.forEach(u),Le=_(m),W=i(m,"DIV",{class:!0});var be=y(W);$=i(be,"LABEL",{class:!0,"data-svelte-h":!0}),L($)!=="svelte-xuo439"&&($.textContent=Me),ke=_(be),ee=i(be,"DIV",{class:!0});var Ke=y(ee);V.l(Ke),Ke.forEach(u),be.forEach(u),De=_(m),te=i(m,"H3",{class:!0,"data-svelte-h":!0}),L(te)!=="svelte-1x0579d"&&(te.textContent=je),Te=_(m),xt(N.$$.fragment,m),Re=_(m),O=i(m,"BUTTON",{type:!0,class:!0});var Xe=y(O);j.l(Xe),Xe.forEach(u),Be=_(m),le=i(m,"P",{class:!0,"data-svelte-h":!0}),L(le)!=="svelte-141w3hg"&&(le.textContent=He),m.forEach(u),ie.forEach(u),x.forEach(u),S.forEach(u),this.h()},h(){document.title="Report Found Item - Ishakiro",o(d,"class","text-center mb-6"),o(b,"class","font-bold mb-4"),o(M,"class","form-label"),o(k,"type","text"),o(k,"placeholder","Your full name"),o(k,"class","form-input"),k.required=!0,o(F,"class","form-group"),o(E,"class","form-label"),o(q,"type","tel"),o(q,"placeholder","+250 788 123 456"),o(q,"class","form-input"),q.required=!0,o(h,"class","form-group"),o(A,"class","grid grid-2 gap-4"),o(K,"class","font-bold mb-4"),o(X,"class","form-label"),o(R,"type","text"),o(R,"placeholder","e.g., Black iPhone 13 Pro"),o(R,"class","form-input"),R.required=!0,o(Y,"class","form-group"),o(Z,"class","form-label"),o(D,"class","form-input"),D.required=!0,s[0].category===void 0&&ut(()=>s[11].call(D)),o(z,"class","form-group"),o(Q,"class","form-label"),o(B,"placeholder","Describe the item: color, brand, model, condition, where you found it"),o(B,"class","form-input svelte-672s98"),o(B,"rows","3"),B.required=!0,o(J,"class","form-group"),o($,"class","form-label"),o(ee,"class","border-2 border-dashed border-gray-300 rounded p-4 text-center"),o(W,"class","form-group"),o(te,"class","font-bold mb-4"),o(O,"type","submit"),O.disabled=s[1],o(O,"class","btn btn-primary w-full svelte-672s98"),o(le,"class","text-center text-sm text-gray-500 mt-4"),o(n,"class","space-y-4"),o(I,"class","card"),o(e,"class","container"),dt(e,"max-width","600px"),o(t,"class","section")},m(a,w){T(a,l,w),T(a,t,w),r(t,e),r(e,d),r(e,g),r(e,I),r(I,n),r(n,b),r(n,P),r(n,A),r(A,F),r(F,M),r(F,re),r(F,k),H(k,s[0].reporter_name),r(A,ae),r(A,h),r(h,E),r(h,se),r(h,q),H(q,s[0].reporter_phone),r(n,ge),r(n,K),r(n,ye),r(n,Y),r(Y,X),r(Y,Ce),r(Y,R),H(R,s[0].title),r(n,xe),r(n,z),r(z,Z),r(z,we),r(z,D);for(let S=0;S<C.length;S+=1)C[S]&&C[S].m(D,null);Ze(D,s[0].category,!0),r(n,Ie),r(n,J),r(J,Q),r(J,Ee),r(J,B),H(B,s[0].description),r(n,Le),r(n,W),r(W,$),r(W,ke),r(W,ee),V.m(ee,null),r(n,De),r(n,te),r(n,Te),Ct(N,n,null),r(n,Re),r(n,O),j.m(O,null),r(n,Be),r(n,le),ne=!0,Ve||(Ye=[G(k,"input",s[8]),G(q,"input",s[9]),G(R,"input",s[10]),G(D,"change",s[11]),G(B,"input",s[12]),G(n,"submit",ct(s[7]))],Ve=!0)},p(a,[w]){if(w&9&&k.value!==a[0].reporter_name&&H(k,a[0].reporter_name),w&9&&H(q,a[0].reporter_phone),w&9&&R.value!==a[0].title&&H(R,a[0].title),w&8){oe=$e(a[3]);let x;for(x=0;x<oe.length;x+=1){const ie=et(a,oe,x);C[x]?C[x].p(ie,w):(C[x]=tt(ie),C[x].c(),C[x].m(D,null))}for(;x<C.length;x+=1)C[x].d(1);C.length=oe.length}w&9&&Ze(D,a[0].category),w&9&&H(B,a[0].description),ue===(ue=ze(a))&&V?V.p(a,w):(V.d(1),V=ue(a),V&&(V.c(),V.m(ee,null)));const S={};!Pe&&w&1&&(Pe=!0,S.selectedLocation=a[0].location,it(()=>Pe=!1)),N.$set(S),de!==(de=We(a))&&(j.d(1),j=de(a),j&&(j.c(),j.m(O,null))),(!ne||w&2)&&(O.disabled=a[1])},i(a){ne||(yt(N.$$.fragment,a),ne=!0)},o(a){gt(N.$$.fragment,a),ne=!1},d(a){a&&(u(l),u(t)),st(C,a),V.d(),bt(N),j.d(),Ve=!1,nt(Ye)}}}async function Vt(s,l={}){try{const t=await fetch(s,{...l,headers:{"Content-Type":"application/json",...l.headers}});if(!t.ok){const e=await t.text();throw console.error("Response error:",e),new Error(`HTTP ${t.status}: ${t.statusText} - ${e}`)}return await t.json()}catch(t){throw console.error("Fetch error:",t),t}}async function At(s){return new Promise(l=>{const t=new FileReader;t.onload=e=>l(e.target.result),t.readAsDataURL(s)})}function Ft(s,l,t){let e={reporter_name:"",reporter_phone:"",title:"",description:"",category:"phone",location:{province:"",district:"",sector:"",cell:"",village:"",isibo:""}},d=!1,f=null,g=null;const I=kt.PUBLIC_API_URL||"http://localhost:8001",n=[{value:"phone",label:"Phone",icon:"ðŸ“±"},{value:"wallet",label:"Wallet",icon:"ðŸ’¼"},{value:"keys",label:"Keys",icon:"ðŸ”‘"},{value:"bag",label:"Bag",icon:"ðŸŽ’"},{value:"documents",label:"Documents",icon:"ðŸ“„"},{value:"electronics",label:"Electronics",icon:"ðŸ’»"},{value:"jewelry",label:"Jewelry",icon:"ðŸ’"},{value:"other",label:"Other",icon:"ðŸ“¦"}];pt(()=>{Et.subscribe(h=>{})});function b(h){const E=h.target.files[0];if(E){if(E.size>5*1024*1024){alert("Max file size: 5MB");return}f=E;const U=new FileReader;U.onload=se=>{t(2,g=se.target.result)},U.readAsDataURL(E)}}function p(){f=null,t(2,g=null)}function P(h){t(0,e.location=h.detail,e)}async function A(){if(!e.reporter_name||!e.reporter_phone||!e.title||!e.description||!e.location.province||!e.location.district||!e.location.sector||!e.location.cell||!e.location.village){alert("Please fill in all required fields including complete location");return}t(1,d=!0);try{let h=null;f&&(h=await At(f));const E={...e,status:"found",image_url:h};console.log("Sending payload:",JSON.stringify(E,null,2));const U=await Vt(`${I}/api/anonymous/report`,{method:"POST",body:JSON.stringify(E)});if(U.success)alert(`âœ… Found item reported successfully!

Tracking Code: ${U.tracking_code}

Save this code to track your item.`),It(`/item/${U.item_id}`);else throw new Error(U.message||"Failed to report item")}catch(h){console.error("Submit error:",h),alert("Error: "+h.message)}finally{t(1,d=!1)}}function F(){e.reporter_name=this.value,t(0,e),t(3,n)}function M(){e.reporter_phone=this.value,t(0,e),t(3,n)}function ce(){e.title=this.value,t(0,e),t(3,n)}function re(){e.category=ht(this),t(0,e),t(3,n)}function k(){e.description=this.value,t(0,e),t(3,n)}function ae(h){s.$$.not_equal(e.location,h)&&(e.location=h,t(0,e))}return[e,d,g,n,b,p,P,A,F,M,ce,re,k,ae]}class Ht extends mt{constructor(l){super(),_t(this,l,Ft,Bt,rt,{})}}export{Ht as component};
